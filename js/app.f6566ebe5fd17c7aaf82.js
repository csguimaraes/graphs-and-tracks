webpackJsonp([0],{0:function(t,e,n){"use strict";var i=n(1),o=n(112),a=n(256),r=n(309),s=n(403),l=n(420),c=n(443),d=n(458);n(459),n(463),n(465),n(467),i.enableProdMode();var p=i.provide(i.PLATFORM_DIRECTIVES,{useValue:[a.ROUTER_DIRECTIVES,s.MdIcon],multi:!0}),m=i.provide(i.PLATFORM_PIPES,{useValue:[d.DumpPipe],multi:!0}),h=[{path:"",component:l.HomeComponent},{path:"challenges",component:l.ChallengeListComponent},{path:"challenges/:id",component:l.ChallengeViewerComponent},{path:"challenges/:id/edit",component:l.ChallengeEditorComponent}],u=a.provideRouter(h);r.bootstrap(l.AppComponent,[o.HTTP_PROVIDERS,u,p,m,c.StorageService,s.MdIconRegistry])["catch"](function(t){return console.error(t)})},420:function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}i(n(421)),i(n(433)),i(n(442)),i(n(448)),i(n(457))},421:function(t,e,n){"use strict";var i=n(1),o=n(422),a=n(423),r=n(424),s=n(428),l=n(429),c=function(){function t(){this.views=[{name:"Challenges",link:"challenges",icon:"stars"}]}return t=__decorate([i.Component({selector:"app",template:n(431),styles:[n(432)],directives:[o.MD_TOOLBAR_DIRECTIVES,r.MD_SIDENAV_DIRECTIVES,a.MD_CARD_DIRECTIVES,s.MD_BUTTON_DIRECTIVES,l.MD_LIST_DIRECTIVES]}),__metadata("design:paramtypes",[])],t)}();e.AppComponent=c},431:function(t,e){t.exports='<md-sidenav-layout fullscreen>\n\n\t<md-sidenav #sidenav>\n\t\t<md-nav-list>\n\t\t\t<a md-list-item *ngFor="let view of views" [routerLink]="[view.link]" (click)="sidenav.close()">\n\t\t\t\t<md-icon md-list-icon>{{view.icon}}</md-icon>\n\t\t\t\t<span md-line>{{view.name}}</span>\n\t\t\t</a>\n\t\t</md-nav-list>\n\t</md-sidenav>\n\n\t<md-toolbar color="primary">\n\t\t<button md-icon-button (click)="sidenav.open()">\n\t\t\t<md-icon>menu</md-icon>\n\t\t</button>\n\t\t<span class="logo">\n\t\t\tGraphs and Tracks\n\t\t\t<small>BETA</small>\n\t\t</span>\n\n\t\t<filler></filler>\n\n\t\t<button md-button [disabled]="true">\n\t\t\tStudent 42\n\t\t\t<md-icon light inactive>account_circle</md-icon>\n\t\t</button>\n\n\t</md-toolbar>\n\n\t<div id="main-container">\n\t\t<router-outlet></router-outlet>\n\t</div>\n</md-sidenav-layout>\n'},432:function(t,e){t.exports="h1{text-decoration:underline}.logo small{opacity:.8;margin-left:10px;font-size:60%}\n"},433:function(t,e,n){"use strict";var i=n(1),o=n(256),a=n(423),r=n(434),s=n(429),l=function(){function t(t){this.router=t}return t.prototype.ngOnInit=function(){this.router.navigate(["/challenges"])},t=__decorate([i.Component({selector:"home",template:n(440),styles:[n(441)],directives:[a.MD_CARD_DIRECTIVES,s.MD_LIST_DIRECTIVES,r.MD_GRID_LIST_DIRECTIVES]}),__metadata("design:paramtypes",[o.Router])],t)}();e.HomeComponent=l},440:function(t,e){t.exports="Loading...\n"},441:function(t,e){t.exports=""},442:function(t,e,n){"use strict";var i=n(1),o=n(423),a=n(429),r=n(434),s=n(443),l=function(){function e(t){this.storage=t}return e.prototype.ngOnInit=function(){this.challenges=this.storage.challenges},e=__decorate([i.Component({moduleId:t.id,selector:"about",template:n(446),styles:[n(447)],directives:[o.MD_CARD_DIRECTIVES,a.MD_LIST_DIRECTIVES,r.MD_GRID_LIST_DIRECTIVES]}),__metadata("design:paramtypes",[s.StorageService])],e)}();e.ChallengeListComponent=l},443:function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}i(n(444))},444:function(t,e,n){"use strict";var i=n(1),o=n(445),a=function(){function t(){this.id=0}return Object.defineProperty(t.prototype,"challenges",{get:function(){return void 0===this._challenges&&(this._challenges=this.parseDefaultChallenges()),this._challenges.slice()},enumerable:!0,configurable:!0}),t.prototype.getChallenge=function(t){return this.challenges.find(function(e){return e.id===t})},t.prototype.parseDefaultChallenges=function(){for(var t=[],e=0,n=o.DEFAULT_CHALLENGES;e<n.length;e++){var i=n[e],a=this.generateId();t.push({id:a,name:"Challenge #"+a,custom:!1,goal:i})}return t},t.prototype.generateId=function(){return this.id++,this.id.toString()},t=__decorate([i.Injectable(),__metadata("design:paramtypes",[])],t)}();e.StorageService=a},445:function(t,e){"use strict";e.MODE_NORMAL={simulation:{duration:25,precision:5},domain:{position:{min:0,max:500,step:50},velocity:{min:-60,max:60,step:10},posts:{min:0,max:10,step:1}},postsCount:6},e.DEFAULT_CHALLENGES=[{position:50,velocity:-30,posts:[5,4,3,2,1,0]},{position:400,velocity:30,posts:[0,0,0,2,4,6]},{position:350,velocity:60,posts:[4,2,0,0,2,4]},{position:50,velocity:-30,posts:[4,2,1,0,2,4]},{position:100,velocity:-50,posts:[3,0,1,1,1,1]},{position:450,velocity:10,posts:[2,2,1,0,2,4]},{position:450,velocity:-30,posts:[5,0,2,2,0,6]},{position:50,velocity:60,posts:[1,2,0,3,0,9]}]},446:function(t,e){t.exports='<md-grid-list card-fill id="challenge-list-grid" cols="1" gutterSize="8px" rowHeight="fit">\n\t<md-grid-tile>\n\t\t<md-card scroll-y>\n\t\t\t<md-card-title>\n\t\t\t\tChallenge List\n\t\t\t</md-card-title>\n\t\t\t<!--\n\t\t\t<md-card-subtitle>\n\t\t\t\tEach challenge has\n\t\t\t</md-card-subtitle>\n\t\t\t-->\n\t\t\t<md-card-content>\n\t\t\t\t<md-list>\n\t\t\t\t\t<h3 md-subheader>Basic Challenges</h3>\n\t\t\t\t\t<md-list-item *ngFor="let challenge of challenges; let i = index" [routerLink]="[\'/challenges\', challenge.id]">\n\t\t\t\t\t\t<md-icon md-list-avatar>star_border</md-icon>\n\t\t\t\t\t\t<h4 md-line>{{challenge.name}}</h4>\n\t\t\t\t\t\t<p md-line class="incomplete">Incomplete (0 attempts)</p>\n\t\t\t\t\t</md-list-item>\n\n\t\t\t\t\t<h3 md-subheader>Custom Challenges</h3>\n\t\t\t\t\t<md-list-item>\n\t\t\t\t\t\t<md-icon md-list-avatar>create</md-icon>\n\t\t\t\t\t\t<h4 md-line>Create Challenge</h4>\n\t\t\t\t\t\t<p md-line>Design your own challenge</p>\n\t\t\t\t\t</md-list-item>\n\t\t\t\t\t<md-list-item>\n\t\t\t\t\t\t<md-icon md-list-avatar>file_upload</md-icon>\n\t\t\t\t\t\t<h4 md-line>Import Challenge</h4>\n\t\t\t\t\t\t<p md-line>Load a challenge from file</p>\n\t\t\t\t\t</md-list-item>\n\t\t\t\t</md-list>\n\t\t\t</md-card-content>\n\t\t</md-card>\n\t</md-grid-tile>\n</md-grid-list>\n\n\n'},447:function(t,e){t.exports="md-grid-list{height:100%}md-grid-list md-card{height:100%;width:100%;box-sizing:border-box}#challenge-list-grid p[md-line]{color:#999}#challenge-list-grid p[md-line].incomplete{color:lightcoral}#challenge-list-grid p[md-line].complete{color:lightgreen}\n"},448:function(t,e,n){"use strict";var i=n(1),o=n(256),a=n(434),r=n(423),s=n(443),l=n(449),c=n(455),d=function(){function e(t,e){this.route=t,this.storage=e;var n=this.route.snapshot.params.id;this.challenge=this.storage.getChallenge(n)}return e.prototype.ngOnInit=function(){},e=__decorate([i.Component({moduleId:t.id,selector:"challenge",template:n(456),directives:[a.MD_GRID_LIST_DIRECTIVES,r.MD_CARD_DIRECTIVES,c.TrackEditorComponent,l.GraphsComponent]}),__metadata("design:paramtypes",[o.ActivatedRoute,s.StorageService])],e)}();e.ChallengeViewerComponent=d},449:function(t,e,n){"use strict";var i=n(1),o=n(450),a=n(452),r=function(){function t(t){this.elementRef=t,this.activeGraph="s"}return t.prototype.ngOnInit=function(){this.goalMotion=new o.Motion(this.goal.position,this.goal.velocity,this.goal.posts),this.goalMotion.execute(),this.goalData=this.goalMotion.getData(),this.element=this.elementRef.nativeElement.querySelector("chart"),this.host=d3.select(this.element)},t.prototype.ngAfterViewInit=function(){this.refresh()},t.prototype.selectGraph=function(t){t!==this.activeGraph&&(this.activeGraph=t,this.refresh())},t.prototype.onResize=function(t){var e=this;this.resizeDelay&&clearInterval(this.resizeDelay),this.clear(),this.resizeDelay=setTimeout(function(){e.refresh()},200)},t.prototype.clear=function(){this.host.html("")},t.prototype.refresh=function(){console.log("refreshing chart"),this.clear();var t={top:20,right:20,bottom:30,left:50},e=this.element.clientWidth-t.left-t.right,n=this.element.clientHeight-t.top-t.bottom,i=this.host.append("svg").attr("width",e+t.left+t.right).attr("height",n+t.top+t.bottom).append("g").attr("transform","translate("+t.left+","+t.top+")"),o=!0,a=this.goalMotion.getData(),r=this.activeGraph,s=d3.scaleLinear().range([0,e]).domain([0,this.goalMotion.mode.simulation.duration]),l=d3.scaleLinear().range([n,0]),c="";switch(r){case"s":var d=this.goalMotion.mode.domain.position;l.domain([d.min,d.max]),c="Position (cm)";break;case"v":var p=d3.extent(a,function(t){return t[r]});p=Math.max(Math.abs(p[0]),Math.abs(p[1])),l.domain([p*-1,p]),c="Velocity (cm/s)";break;case"a":var m=this.goalMotion.mode.domain.posts,h=10*(m.min-m.max);l.domain([h*-1,h]),c="Acceleration (cm/sÂ²)";break;default:throw"Unknown graph type"}var u=d3.line().x(function(t){return s(t.t)}).y(function(t){return l(t[r])}),g=i.append("path").data([a]).attr("d",u);g.classed(r,!0),g.classed("line",!0),o&&g.classed("goal",!0);var f=d3.axisBottom(s);f.tickValues([5,10,15,20,25]),f.tickFormat(function(t){return t+"s"}),i.append("g").attr("class","axis axis-x").attr("transform","translate(0,"+l(0)+")").call(f),i.append("g").attr("class","axis").call(d3.axisLeft(l)),i.append("text").attr("class","axis-title").attr("transform","rotate(-90)").attr("y",t.left*-1+5).attr("x",n/-2).attr("dy",".71em").style("text-anchor","middle").text(c)},t.prototype.debug=function(t){var e="goal"===t?this.goalMotion.getData():[];a.printDataTable(e,t)},__decorate([i.Input(),__metadata("design:type",Object)],t.prototype,"goal",void 0),__decorate([i.Input(),__metadata("design:type",Object)],t.prototype,"trial",void 0),t=__decorate([i.Component({selector:"graphs",template:n(453),host:{"(window:resize)":"onResize($event)"},styles:[n(454)]}),__metadata("design:paramtypes",[i.ElementRef])],t)}();e.GraphsComponent=r},450:function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}i(n(451))},451:function(t,e,n){"use strict";var i=n(445),o=function(){function t(t,e,n,o){this.mode=o||i.MODE_NORMAL;var a=this.mode.domain.position.max,r=this.mode.postsCount,s=a/(r-1);this.ramps=[];for(var l=1;l<n.length;l++)this.ramps.push({end:s*l,acceleration:10*(n[l-1]-n[l])});this.initialPosition=t,this.initialVelocity=e,this.posts=n}return t.prototype.execute=function(){var t=this.initialPosition,e=this.initialVelocity,n=this.getAccelerationAt(t);this.commitData(0,t,e,n);for(var i=1/this.mode.simulation.precision,o=this.mode.simulation.duration,a=this.mode.domain.position,r=i;r<=o&&(t=t+e*i+Math.pow(i,2)*n/2,e+=n*i,n=this.getAccelerationAt(t),this.commitData(r,t,e,n),!(t>a.max||t<a.min));r+=i);},t.prototype.getData=function(){return this.data.slice()},t.prototype.getAccelerationAt=function(t){for(var e,n=0,i=this.ramps;n<i.length;n++){var o=i[n];if(e=o.acceleration,o.end>t)break}return e},t.prototype.commitData=function(t,e,n,i){0!==t&&void 0!==this.data||(this.data=[]),this.data.push({t:t,s:e,v:n,a:i})},t}();e.Motion=o},452:function(t,e){"use strict";function n(t,e){var n=window.open("","","width=300,height=500,resizeable,scrollbars");n.document.write("<h3>Motion data generated for challenge "+e+"</h3>"),n.document.write('\n\t<table border="1">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th>#</th>\n\t\t\t\t<th>T</th>\n\t\t\t\t<th>S</th>\n\t\t\t\t<th>V</th>\n\t\t\t\t<th>A</th>\n\t\t\t</tr>\n\t\t</thead>\n\t<tbody>\n\t');for(var i=0,o=0,a=t;o<a.length;o++){var r=a[o];i++,n.document.write("\n\t\t\t<tr>\n\t\t\t\t<td>"+i+"</td>\n\t\t\t\t<td>"+r.t.toFixed(2)+"</td>\n\t\t\t\t<td>"+r.s.toFixed(2)+"</td>\n\t\t\t\t<td>"+r.v.toFixed(2)+"</td>\n\t\t\t\t<td>"+r.a.toFixed(2)+"</td>\n\t\t\t</tr>\n\t\t")}n.document.write("</tbody></table>"),n.document.close()}e.printDataTable=n},453:function(t,e){t.exports='<md-card>\n\t<md-card-title>\n\t\tGraphs\n\t\t<div class="graph-selector">\n\t\t\t<span [class.active]="activeGraph == \'s\'" class="s" (click)="selectGraph(\'s\')">\n\t\t\t\tPosition\n\t\t\t</span>\n\t\t\t<span [class.active]="activeGraph == \'v\'" class="v" (click)="selectGraph(\'v\')">\n\t\t\t\tVelocity\n\t\t\t</span>\n\t\t\t<span [class.active]="activeGraph == \'a\'" class="a" (click)="selectGraph(\'a\')">\n\t\t\t\tAcceleration\n\t\t\t</span>\n\t\t</div>\n\n\n\t\t<div id="debug">\n\t\t\t<md-icon small (click)="debug(\'goal\')" title="DEBUG: data generated for GOAL motion">flip_to_back</md-icon>\n\t\t\t<md-icon small (click)="debug(\'trial\')" title="DEBUG: data generated for TRIAL motion">flip_to_front</md-icon>\n\t\t</div>\n\n\t</md-card-title>\n\t<md-card-content>\n\t\t<chart class="{{activeGraph}}"></chart>\n\t</md-card-content>\n</md-card>\n'},454:function(t,e){t.exports=".graph-selector{display:inline-block;font-size:14px;margin-left:10px;margin-top:-4px;font-weight:600;vertical-align:middle;white-space:nowrap}.graph-selector span{display:inline-block;border:1px solid black;padding:2px 8px;cursor:pointer;margin-right:-4px}.graph-selector span.active{color:white;background:#333}.graph-selector span.active.s{background:#4682b4}.graph-selector span.active.v{background:#ff4500}.graph-selector span.active.a{background:#228b22}.graph-selector span:hover:not(.active){background:#EAEAEA}.graph-selector span:first-child{border-radius:4px 0 0 4px}.graph-selector span:last-child{border-radius:0 4px 4px 0}#debug{position:absolute;top:0;right:0}#debug md-icon{padding:0;cursor:pointer;color:red}md-card{padding-bottom:8px !important}md-card-title{overflow:hidden;white-space:nowrap}md-card-content{height:calc(100% - 28px - 16px);margin-left:-16px !important;margin-right:-16px !important;margin-bottom:-16px !important}chart{width:100%;height:100%;display:block}chart /deep/ .line{fill:none;stroke-width:2px;stroke:black}chart /deep/ .line.goal{stroke-dasharray:5 10;animation:dashing 5s linear infinite}chart /deep/ .line.trial{stroke-dasharray:3 7;animation:dashing 1s linear infinite}chart /deep/ .line.s{stroke:#4682b4}chart /deep/ .line.v{stroke:#ff4500}chart /deep/ .line.a{stroke:#228b22}chart /deep/ .axis{shape-rendering:crispEdges}chart /deep/ .axis-x{stroke-dasharray:10 5;stroke-width:1px}@keyframes dashing{0%{stroke-dashoffset:90}100%{stroke-dashoffset:0}}\n"},455:function(t,e,n){"use strict";var i=n(1),o=function(){function t(){}return t.prototype.ngOnInit=function(){},t=__decorate([i.Component({selector:"track-editor",template:"\n\t\t<md-card>\n\t\t\t<md-card-title>Track</md-card-title>\n\t\t\t\n\t\t\t<md-card-content>\n\t\t\t\t\n\t\t\t</md-card-content>\n\t\t</md-card>\n\t"}),__metadata("design:paramtypes",[])],t)}();e.TrackEditorComponent=o},456:function(t,e){t.exports='<md-grid-list card-fill rowHeight="fit" cols="5" gutterSize="8px">\n\t<md-grid-tile colspan="2" rowspan="2">\n\t\t<md-card class="info-card">\n\t\t\t<md-card-title>\n\t\t\t\t{{ challenge.name }}\n\t\t\t\t<small>\n\t\t\t\t\tcreated by <b>Student 42</b>\n\t\t\t\t</small>\n\t\t\t</md-card-title>\n\n\t\t\t<md-card-content>\n\t\t\t\t<b>DEBUG INFO</b> <br>\n\t\t\t\tInitial Position: {{challenge.goal.position}} <br>\n\t\t\t\tInitial Velocity: {{challenge.goal.velocity}} <br>\n\t\t\t\tPosts: {{challenge.goal.posts | dump }}\n\t\t\t</md-card-content>\n\n\t\t\t<md-card-actions>\n\t\t\t\t<button md-button [routerLink]="[\'/challenges\']">\n\t\t\t\t\t<md-icon small>keyboard_backspace</md-icon>\n\t\t\t\t\tGo Back\n\t\t\t\t</button>\n\n\t\t\t\t<filler></filler>\n\n\t\t\t\t<button md-button>\n\t\t\t\t\t<md-icon small>edit</md-icon>\n\t\t\t\t\tEdit\n\t\t\t\t</button>\n\n\t\t\t\t<button md-button>\n\t\t\t\t\t<md-icon small>share</md-icon>\n\t\t\t\t\tShare\n\t\t\t\t</button>\n\t\t\t</md-card-actions>\n\t\t</md-card>\n\t</md-grid-tile>\n\n\t<md-grid-tile colspan="3" rowspan="5">\n\t\t<track-editor></track-editor>\n\t</md-grid-tile>\n\n\t<md-grid-tile colspan="2" rowspan="3">\n\t\t<graphs fill [goal]="challenge.goal"></graphs>\n\t</md-grid-tile>\n</md-grid-list>\n'},457:function(t,e,n){"use strict";var i=n(1),o=n(256),a=function(){function e(t){this.route=t}return e.prototype.ngOnInit=function(){this.challengeId=this.route.snapshot.params.id},e=__decorate([i.Component({moduleId:t.id,selector:"challenge",template:"\n\t\tEditing Challenge ID {{ challengeId }}\n\t"}),__metadata("design:paramtypes",[o.ActivatedRoute])],e)}();e.ChallengeEditorComponent=a},458:function(t,e,n){"use strict";var i=n(1),o=function(){function t(){}return t.prototype.transform=function(t,e){return JSON.stringify(t)},t=__decorate([i.Pipe({name:"dump"}),__metadata("design:paramtypes",[])],t)}();e.DumpPipe=o},459:function(t,e){},463:459,465:459,467:459});
//# sourceMappingURL=app.f6566ebe5fd17c7aaf82.js.map